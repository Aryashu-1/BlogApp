{"ast":null,"code":"import{createSlice,createAsyncThunk,isPending}from\"@reduxjs/toolkit\";import axios from\"axios\";//making http requests using redux-thunk middleware\nexport const userAuthorLoginThunk=createAsyncThunk(\"user-author-login\",async(userCred,thunkApi)=>{try{if(userCred.userType===\"User\"){// Axios instance with custom HTTPS agent to handle self-signed certificates\nconst axiosInstance=axios.create({httpsAgent:new https.Agent({rejectUnauthorized:false})});try{const res=await axiosInstance.post(\"https://localhost:4000/user-api/login\",userCred);// Handle response\n}catch(error){// Handle error\n}if(res.data.message===\"Login Succesfull\"){//store token in local storage\nlocalStorage.setItem(\"token\",res.data.token);//return data\n}else{thunkApi.rejectWithValue(res.data.message);}return res.data;}if(userCred.userType===\"Author\"){const res=await axios.post(\"https://localhost:4000/author-api/login\",userCred);if(res.data.message===\"Login Succesfull\"){//store token in local storage\nlocalStorage.setItem(\"token\",res.data.token);//return data\n}else{thunkApi.rejectWithValue(res.data.message);}return res.data;}}catch(err){return thunkApi.rejectWithValue(err);}});const userauthorslice=createSlice({name:\"user-author-login\",initialState:{\"isPending\":false,\"loginUserStatus\":false,\"currentUser\":{},\"errOccurred\":false,\"errMsg\":''},reducers:{resetState:(state,action)=>{state.isPending=false;state.currentUser={};state.loginUserStatus=false;state.errMsg='';state.errOccurred=false;}},extraReducers:builder=>builder.addCase(userAuthorLoginThunk.pending,(state,action)=>{state.isPending=true;}).addCase(userAuthorLoginThunk.fulfilled,(state,action)=>{state.isPending=false;state.currentUser=action.payload.user;state.loginUserStatus=true;state.errMsg='';state.errOccurred=false;}).addCase(userAuthorLoginThunk.rejected,(state,action)=>{state.isPending=false;state.currentUser={};state.loginUserStatus=false;state.errMsg=action.payload;state.errOccurred=true;})});//export action creatorfunctions\nexport const{resetState}=userauthorslice.actions;//export root reducer f this slice\nexport default userauthorslice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","isPending","axios","userAuthorLoginThunk","userCred","thunkApi","userType","axiosInstance","create","httpsAgent","https","Agent","rejectUnauthorized","res","post","error","data","message","localStorage","setItem","token","rejectWithValue","err","userauthorslice","name","initialState","reducers","resetState","state","action","currentUser","loginUserStatus","errMsg","errOccurred","extraReducers","builder","addCase","pending","fulfilled","payload","user","rejected","actions","reducer"],"sources":["C:/Users/DELL/Desktop/Blog/Client/blog/src/redux/slices/userauthorslice.js"],"sourcesContent":["import { createSlice,createAsyncThunk, isPending } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\n//making http requests using redux-thunk middleware\r\nexport const userAuthorLoginThunk = createAsyncThunk(\"user-author-login\",async(userCred,thunkApi )=>{\r\n    try {\r\n    if(userCred.userType === \"User\"){\r\n     \r\n        // Axios instance with custom HTTPS agent to handle self-signed certificates\r\nconst axiosInstance = axios.create({\r\n    httpsAgent: new https.Agent({ rejectUnauthorized: false })\r\n  });\r\n  \r\n  try {\r\n    const res = await axiosInstance.post(\"https://localhost:4000/user-api/login\", userCred);\r\n    // Handle response\r\n  } catch (error) {\r\n    // Handle error\r\n  }\r\n       if( res.data.message === \"Login Succesfull\"){\r\n             //store token in local storage\r\n             localStorage.setItem(\"token\",res.data.token)\r\n             //return data\r\n             \r\n       }\r\n       else{\r\n            thunkApi.rejectWithValue(res.data.message)\r\n       }\r\n       return res.data\r\n    }\r\n    if(userCred.userType === \"Author\"){\r\n        \r\n            const res = await axios.post(\"https://localhost:4000/author-api/login\",userCred)\r\n        if( res.data.message === \"Login Succesfull\"){\r\n            //store token in local storage\r\n            localStorage.setItem(\"token\",res.data.token)\r\n            //return data\r\n\r\n        }\r\n        else{\r\n             thunkApi.rejectWithValue(res.data.message)\r\n        }\r\n        return res.data\r\n    }\r\n}catch(err){\r\n    return thunkApi.rejectWithValue(err)\r\n}})\r\n\r\n\r\nconst userauthorslice = createSlice({\r\n    name:\"user-author-login\",\r\n    initialState:{\r\n        \"isPending\" : false,\r\n        \"loginUserStatus\": false,\r\n        \"currentUser\":{},\r\n        \"errOccurred\":false,\r\n        \"errMsg\":'',\r\n    },\r\n    reducers:{\r\n            resetState: (state,action)=>{\r\n                state.isPending = false;\r\n                state.currentUser ={};\r\n                state.loginUserStatus = false;\r\n                state.errMsg='';\r\n                state.errOccurred = false;    \r\n\r\n            }\r\n    },\r\n    extraReducers: builder => builder\r\n    .addCase(userAuthorLoginThunk.pending,(state,action)=>{\r\n        state.isPending = true;\r\n    })\r\n    .addCase(userAuthorLoginThunk.fulfilled,(state,action)=>{\r\n        state.isPending = false;\r\n        state.currentUser = action.payload.user;\r\n        state.loginUserStatus = true;\r\n        state.errMsg='';\r\n        state.errOccurred=false;\r\n    })\r\n    .addCase(userAuthorLoginThunk.rejected,(state,action)=>{\r\n        state.isPending = false;\r\n        state.currentUser = {};\r\n        state.loginUserStatus = false;\r\n        state.errMsg=action.payload;\r\n        state.errOccurred=true;\r\n    }),\r\n})\r\n\r\n//export action creatorfunctions\r\nexport const {resetState}= userauthorslice.actions\r\n//export root reducer f this slice\r\nexport default userauthorslice.reducer;\r\n"],"mappings":"AAAA,OAASA,WAAW,CAACC,gBAAgB,CAAEC,SAAS,KAAQ,kBAAkB,CAC1E,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB;AACA,MAAO,MAAM,CAAAC,oBAAoB,CAAGH,gBAAgB,CAAC,mBAAmB,CAAC,MAAMI,QAAQ,CAACC,QAAQ,GAAI,CAChG,GAAI,CACJ,GAAGD,QAAQ,CAACE,QAAQ,GAAK,MAAM,CAAC,CAE5B;AACR,KAAM,CAAAC,aAAa,CAAGL,KAAK,CAACM,MAAM,CAAC,CAC/BC,UAAU,CAAE,GAAI,CAAAC,KAAK,CAACC,KAAK,CAAC,CAAEC,kBAAkB,CAAE,KAAM,CAAC,CAC3D,CAAC,CAAC,CAEF,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAN,aAAa,CAACO,IAAI,CAAC,uCAAuC,CAAEV,QAAQ,CAAC,CACvF;AACF,CAAE,MAAOW,KAAK,CAAE,CACd;AAAA,CAEG,GAAIF,GAAG,CAACG,IAAI,CAACC,OAAO,GAAK,kBAAkB,CAAC,CACtC;AACAC,YAAY,CAACC,OAAO,CAAC,OAAO,CAACN,GAAG,CAACG,IAAI,CAACI,KAAK,CAAC,CAC5C;AAEN,CAAC,IACG,CACCf,QAAQ,CAACgB,eAAe,CAACR,GAAG,CAACG,IAAI,CAACC,OAAO,CAAC,CAC/C,CACA,MAAO,CAAAJ,GAAG,CAACG,IAAI,CAClB,CACA,GAAGZ,QAAQ,CAACE,QAAQ,GAAK,QAAQ,CAAC,CAE1B,KAAM,CAAAO,GAAG,CAAG,KAAM,CAAAX,KAAK,CAACY,IAAI,CAAC,yCAAyC,CAACV,QAAQ,CAAC,CACpF,GAAIS,GAAG,CAACG,IAAI,CAACC,OAAO,GAAK,kBAAkB,CAAC,CACxC;AACAC,YAAY,CAACC,OAAO,CAAC,OAAO,CAACN,GAAG,CAACG,IAAI,CAACI,KAAK,CAAC,CAC5C;AAEJ,CAAC,IACG,CACCf,QAAQ,CAACgB,eAAe,CAACR,GAAG,CAACG,IAAI,CAACC,OAAO,CAAC,CAC/C,CACA,MAAO,CAAAJ,GAAG,CAACG,IAAI,CACnB,CACJ,CAAC,MAAMM,GAAG,CAAC,CACP,MAAO,CAAAjB,QAAQ,CAACgB,eAAe,CAACC,GAAG,CAAC,CACxC,CAAC,CAAC,CAAC,CAGH,KAAM,CAAAC,eAAe,CAAGxB,WAAW,CAAC,CAChCyB,IAAI,CAAC,mBAAmB,CACxBC,YAAY,CAAC,CACT,WAAW,CAAG,KAAK,CACnB,iBAAiB,CAAE,KAAK,CACxB,aAAa,CAAC,CAAC,CAAC,CAChB,aAAa,CAAC,KAAK,CACnB,QAAQ,CAAC,EACb,CAAC,CACDC,QAAQ,CAAC,CACDC,UAAU,CAAEA,CAACC,KAAK,CAACC,MAAM,GAAG,CACxBD,KAAK,CAAC3B,SAAS,CAAG,KAAK,CACvB2B,KAAK,CAACE,WAAW,CAAE,CAAC,CAAC,CACrBF,KAAK,CAACG,eAAe,CAAG,KAAK,CAC7BH,KAAK,CAACI,MAAM,CAAC,EAAE,CACfJ,KAAK,CAACK,WAAW,CAAG,KAAK,CAE7B,CACR,CAAC,CACDC,aAAa,CAAEC,OAAO,EAAIA,OAAO,CAChCC,OAAO,CAACjC,oBAAoB,CAACkC,OAAO,CAAC,CAACT,KAAK,CAACC,MAAM,GAAG,CAClDD,KAAK,CAAC3B,SAAS,CAAG,IAAI,CAC1B,CAAC,CAAC,CACDmC,OAAO,CAACjC,oBAAoB,CAACmC,SAAS,CAAC,CAACV,KAAK,CAACC,MAAM,GAAG,CACpDD,KAAK,CAAC3B,SAAS,CAAG,KAAK,CACvB2B,KAAK,CAACE,WAAW,CAAGD,MAAM,CAACU,OAAO,CAACC,IAAI,CACvCZ,KAAK,CAACG,eAAe,CAAG,IAAI,CAC5BH,KAAK,CAACI,MAAM,CAAC,EAAE,CACfJ,KAAK,CAACK,WAAW,CAAC,KAAK,CAC3B,CAAC,CAAC,CACDG,OAAO,CAACjC,oBAAoB,CAACsC,QAAQ,CAAC,CAACb,KAAK,CAACC,MAAM,GAAG,CACnDD,KAAK,CAAC3B,SAAS,CAAG,KAAK,CACvB2B,KAAK,CAACE,WAAW,CAAG,CAAC,CAAC,CACtBF,KAAK,CAACG,eAAe,CAAG,KAAK,CAC7BH,KAAK,CAACI,MAAM,CAACH,MAAM,CAACU,OAAO,CAC3BX,KAAK,CAACK,WAAW,CAAC,IAAI,CAC1B,CAAC,CACL,CAAC,CAAC,CAEF;AACA,MAAO,MAAM,CAACN,UAAU,CAAC,CAAEJ,eAAe,CAACmB,OAAO,CAClD;AACA,cAAe,CAAAnB,eAAe,CAACoB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}